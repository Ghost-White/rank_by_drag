<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>test</title>
</head>
<body>
	<input type="button" value="上传图片" onclick="imgSave()"/><br/>
	<canvas id="canvas" width="400" height="300"></canvas>
	<div id="result"></div>
</body>
<script>
    var canvas;
    function draw(id) {
         canvas = document.getElementById(id);
        var context = canvas.getContext('2d');
        context.fillStyle = 'rgb(56,86,155)';
        context.fillRect(0,0,canvas.width,canvas.height);
        context.fillStyle = 'rgb(100,255,0)';
        context.fillRect(100,60,50,80);	
        /*四个参数分别为：左侧起始位置，上侧起始位置，右侧终止位置，下侧终止位置（并非真实宽度和高度）*/
    }
    draw('canvas');
   
    function imgSave(){
    	var result = document.getElementById("result");
        var data = canvas.toDataURL("image/png");
        data = data.replace("data:image/png;base64,","");
        var xhr = new XMLHttpRequest();
        data_b = window.atob(data);
        data_a = window.btoa(data_b);
        result.innerHTML = '<img src="data:image/png;base64,'+data_a+'"/>';
    }
</script>
</html>